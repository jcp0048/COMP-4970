<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Gamedev Canvas Workshop</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }
        
        canvas {
            background: rgba(38, 32, 46, 0.856);
            display: block;
            margin: 0 auto;
        }
    </style>
</head>

<body>

    <canvas id="myCanvas" width="480" height="320"></canvas>
    <script>
        var score = 0;
        var lives = 3;
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var shipHeight = 30;
        var shipWidth = 30;
        var missileHeight = 40;
        var missileWidth = 10;
        var shipX = (canvas.width - shipWidth) / 2;
        var missileX = (canvas.width - missileWidth) / 2;
        var x = canvas.width / 2;
        var y = canvas.height - 30;
        var dx = 2;
        var dy = -2;
        var spacePressed = false;
        var rightPressed = false;
        var leftPressed = false;

        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);

        function keyDownHandler(e) {
            if (e.keyCode == 39) {
                rightPressed = true;
            }
            if (e.keyCode == 32) {
                spacePressed = true;
            } else if (e.keyCode == 37) {
                leftPressed = true;
            }
        }

        function keyUpHandler(e) {
            if (e.keyCode == 39) {
                rightPressed = false;
            } else if (e.keyCode == 37) {
                leftPressed = false;
            }
        }

        function drawShip() {
            ctx.beginPath();
            ctx.rect(shipX, canvas.height - shipHeight, shipWidth, shipHeight);
            ctx.fillStyle = "#0095DD";
            ctx.fill();
            ctx.closePath();
        }

        function drawMissile() {
            ctx.beginPath();
            ctx.rect(missileX, y - missileHeight, missileWidth, missileHeight);
            ctx.fillStyle = "#ea1700";
            ctx.fill();
            ctx.closePath();
        }

        function drawScore() {
            ctx.font = "16px Arial";
            ctx.fillStyle = "#0095DD";
            ctx.fillText("Score: " + score, 8, 20);
        }

        function drawLives() {
            ctx.font = "16px Arial";
            ctx.fillStyle = "#0095DD";
            ctx.fillText("Lives: " + lives, canvas.width - 65, 20);
        }

        // function startGame() {
        //     ctx.clearRect(0, 0, canvas.width, canvas.height);
        //     ctx.beginPath()
        //     ctx.rect(0, 0, 480, 320);
        //     ctx.fillStyle = "#000000";
        //     ctx.fill();
        //     ctx.closePath();

        //     ctx.beginPath()
        //     ctx.rect(160, 130, 160, 30);
        //     ctx.fillStyle = "#0095DD";
        //     ctx.fill();
        //     ctx.closePath();

        //     ctx.font = "16px Arial";
        //     ctx.fillStyle = "#000000";
        //     ctx.fillText("Press Enter to Start", 170, 150);
        // }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawScore()
            drawLives()
            drawMissile()
            drawShip()

            if (spacePressed == true) {
                x += dx;
                y += dy;
            }

            if (y + dy < 0) {
                x = canvas.width / 2;
                y = canvas.height - 30;
                spacePressed = false;
                drawMissile()

            }

            //draw missile
            if (rightPressed && missileX < canvas.width - missileWidth) {
                missileX += 7;
            } else if (leftPressed && missileX > 0) {
                missileX -= 7;
            }

            //move ship
            if (rightPressed && shipX < canvas.width - shipWidth) {
                shipX += 7;
            } else if (leftPressed && shipX > 0) {
                shipX -= 7;
            }


        }
        setInterval(draw, 10);
    </script>

</body>

</html>